<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego del Impostor üïµÔ∏è</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="vista-inicio" class="vista activa">
        <h1>üïµÔ∏è El Impostor de la Palabra</h1>
        
        <form id="form-inicio">
            <label for="input-nombre">Tu Nombre:</label>
            <input type="text" id="input-nombre" placeholder="Ej: Lord" required maxlength="15">
            <button type="submit">Siguiente ‚ñ∂Ô∏è</button>
        </form>
    </div>

    <div id="vista-seleccion" class="vista">
        <h1>¬°Hola, <span id="nombre-jugador-display"></span>!</h1>
        <div class="opciones-sala">
            <button id="btn-crear-sala" class="btn-principal">‚ú® Crear Sala (HOST)</button>

            <form id="form-unirse-sala">
                <input type="text" id="input-codigo" placeholder="C√ìDIGO (Ej: ABCD)" required maxlength="4">
                <button type="submit" class="btn-secundario">‚û°Ô∏è Unirse a Sala</button>
            </form>
        </div>
        <button onclick="cambiarVista('vista-inicio')" class="btn-volver">‚Üê Volver</button>
    </div>

    <div id="vista-lobby" class="vista">
        <h1 class="titulo-sala">Sala <span id="codigo-lobby-display">ABCD</span></h1>
        
        <h2>Jugadores Conectados (<span id="contador-jugadores">0</span>/10)</h2>
        <p>Comparte el c√≥digo con tus amigos.</p>

        <ul id="lista-jugadores-host" class="lista-jugadores">
            </ul>
        
        <div class="opciones-host">
            <h2 class="titulo-config">Configuraci√≥n del Juego</h2>
            
            <form id="form-configuracion" class="config-grid">
                <div class="config-item">
                    <label for="select-tema">Tema de las Palabras:</label>
                    <select id="select-tema" name="tema"></select>
                </div>
                <div class="config-item checkbox-item">
                    <label for="checkbox-agente-doble">Incluir Agente Doble:</label>
                    <input type="checkbox" id="checkbox-agente-doble" name="incluirAgenteDoble">
                </div>
            </form>
            
            <p id="aviso-min-jugadores" style="display: block; color: var(--color-red);">
                ¬°Necesitas al menos 3 jugadores para iniciar!
            </p>
            
            <button id="btn-iniciar-revelacion" class="btn-principal btn-grande" disabled>
                ü§´ Asignar Roles e INICIAR
            </button> 
            <button onclick="abandonarSala()" class="btn-volver">‚Üê Abandonar</button>
        </div>
    </div>
    
    <div id="vista-revelacion-rol" class="vista">
        <div class="caja-rol">
            <h2>TU ROL ES:</h2>
            <h1 id="revelacion-titulo">Tripulante</h1>
            
            <p class="aviso-palabra">
                <span id="revelacion-tema">Tema: [TEMA]</span>
            </p>
            <p class="aviso-palabra">
                Tu palabra clave es: 
                <strong id="revelacion-palabra">[PALABRA]</strong>
            </p>

            <hr>

            <h2>Jugadores en la Sala:</h2>
            <ul id="revelacion-lista-jugadores" class="lista-jugadores">
                </ul>
            
            <button id="btn-iniciar-discusion" class="btn-confirm btn-grande" style="display: none;">
                üì¢ INICIAR DISCUSI√ìN (HOST)
            </button>
            <p id="aviso-espera-discusion" class="mensaje-espera">
                Esperando a que el HOST inicie la discusi√≥n...
            </p>
        </div>
    </div>
    
    <div id="vista-juego" class="vista">
        <h1>Sala de Conversaci√≥n üí¨</h1>
        
        <div id="datos-juego-container">
            <div id="temporizador-container" style="display: none;"> 
                <h2>Tiempo Restante: <span id="tiempo-restante">--</span>s</h2>
            </div>
            
            <div class="datos-rol-juego">
                <h2>Tu Rol: <span id="mi-rol-juego">Tripulante</span></h2>
                <p>Tema: <strong id="mi-tema-juego">...</strong></p>
                <p>Palabra: <strong id="mi-palabra-juego">...</strong></p>
            </div>
        </div>

        <h2>Jugadores Activos: (<span id="jugadores-activos-contador">0</span>)</h2>
        <ul id="lista-jugadores-juego" class="lista-jugadores">
            </ul>
        
        <button id="btn-forzar-votacion" class="btn-alert btn-grande" style="display: none;">
            üî¥ INICIAR VOTACI√ìN (HOST)
        </button>
        
        <button onclick="abandonarSala()" class="btn-volver">‚Üê Abandonar</button>
    </div>

    <div id="vista-votacion" class="vista">
        <h1>Votaci√≥n P√∫blica üó≥Ô∏è</h1>
        <p>Ronda <span id="ronda-votacion-display">1</span> - Vota por el impostor.</p>
        
        <div id="opciones-votacion" class="opciones-votacion">
            </div>

        <div class="voto-estado">
            <p id="voto-confirmado-display">Esperando tu voto...</p>
            <p id="votos-emitidos-display">Votos recibidos: 0/0</p>
        </div>
        
    </div>

    <div id="vista-resultado" class="vista">
        <h1>‚úÖ Resultados de la Votaci√≥n</h1>
        <p id="resultado-ronda-display" class="resultado-ronda">Ronda 1 finalizada.</p>
        <div id="detalles-votacion-container" class="detalles-votacion-container">
            </div>

        <p id="jugador-eliminado-display" class="aviso-eliminado">
            [RESULTADO]
        </p>
        
        <button id="btn-siguiente-ronda" class="btn-principal" style="display: none;">
            ‚û°Ô∏è Siguiente Ronda
        </button>
        <button id="btn-ver-ganador" class="btn-principal" style="display: none;">
            üèÜ Ver Ganador
        </button>
    </div>

    <div id="vista-final" class="vista">
        <h1 id="ganador-display">üèÜ [GANADOR] üèÜ</h1>
        <p>El juego ha terminado. El rol secreto era:</p>
        <ul id="lista-roles-final" class="lista-jugadores lista-final">
            </ul>
        
        <button onclick="window.location.reload()" class="btn-principal">
            Volver a Jugar
        </button>
    </div>


    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="cliente.js"></script>
</body>
</html>